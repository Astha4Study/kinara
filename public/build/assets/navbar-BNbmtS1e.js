import{r as i,j as e,u as F,L as j,b as H}from"./app-CgQ5_Exw.js";import{l as W,A as z,a as $,L as P,X as B}from"./avatar-CqAQLXEM.js";import{c as E}from"./utils-B4smH_VX.js";import{M as X,i as G,u as D,P as V,a as Y,b as q,L as J,m as Q}from"./proxy-Cq8dZP5I.js";import{U as I}from"./user-D5RYSoco.js";const Z=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],ee=E("ArrowUpRight",Z);const te=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],A=E("LayoutDashboard",te);const se=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],ne=E("Menu",se);function U(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function re(...s){return t=>{let a=!1;const l=s.map(o=>{const r=U(o,t);return!a&&typeof r=="function"&&(a=!0),r});if(a)return()=>{for(let o=0;o<l.length;o++){const r=l[o];typeof r=="function"?r():U(s[o],null)}}}}function ae(...s){return i.useCallback(re(...s),s)}class ie extends i.Component{getSnapshotBeforeUpdate(t){const a=this.props.childRef.current;if(a&&t.isPresent&&!this.props.isPresent){const l=a.offsetParent,o=G(l)&&l.offsetWidth||0,r=this.props.sizeRef.current;r.height=a.offsetHeight||0,r.width=a.offsetWidth||0,r.top=a.offsetTop,r.left=a.offsetLeft,r.right=o-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function le({children:s,isPresent:t,anchorX:a,root:l}){const o=i.useId(),r=i.useRef(null),f=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=i.useContext(X),b=ae(r,s?.ref);return i.useInsertionEffect(()=>{const{width:d,height:v,top:c,left:u,right:m}=f.current;if(t||!r.current||!d||!v)return;const p=a==="left"?`left: ${u}`:`right: ${m}`;r.current.dataset.motionPopId=o;const n=document.createElement("style");x&&(n.nonce=x);const g=l??document.head;return g.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${v}px !important;
            ${p}px !important;
            top: ${c}px !important;
          }
        `),()=>{g.contains(n)&&g.removeChild(n)}},[t]),e.jsx(ie,{isPresent:t,childRef:r,sizeRef:f,children:i.cloneElement(s,{ref:b})})}const oe=({children:s,initial:t,isPresent:a,onExitComplete:l,custom:o,presenceAffectsLayout:r,mode:f,anchorX:x,root:b})=>{const d=D(ce),v=i.useId();let c=!0,u=i.useMemo(()=>(c=!1,{id:v,initial:t,isPresent:a,custom:o,onExitComplete:m=>{d.set(m,!0);for(const p of d.values())if(!p)return;l&&l()},register:m=>(d.set(m,!1),()=>d.delete(m))}),[a,d,l]);return r&&c&&(u={...u}),i.useMemo(()=>{d.forEach((m,p)=>d.set(p,!1))},[a]),i.useEffect(()=>{!a&&!d.size&&l&&l()},[a]),f==="popLayout"&&(s=e.jsx(le,{isPresent:a,anchorX:x,root:b,children:s})),e.jsx(V.Provider,{value:u,children:s})};function ce(){return new Map}const w=s=>s.key||"";function S(s){const t=[];return i.Children.forEach(s,a=>{i.isValidElement(a)&&t.push(a)}),t}const de=({children:s,custom:t,initial:a=!0,onExitComplete:l,presenceAffectsLayout:o=!0,mode:r="sync",propagate:f=!1,anchorX:x="left",root:b})=>{const[d,v]=Y(f),c=i.useMemo(()=>S(s),[s]),u=f&&!d?[]:c.map(w),m=i.useRef(!0),p=i.useRef(c),n=D(()=>new Map),[g,K]=i.useState(c),[k,L]=i.useState(c);q(()=>{m.current=!1,p.current=c;for(let y=0;y<k.length;y++){const h=w(k[y]);u.includes(h)?n.delete(h):n.get(h)!==!0&&n.set(h,!1)}},[k,u.length,u.join("-")]);const C=[];if(c!==g){let y=[...c];for(let h=0;h<k.length;h++){const N=k[h],R=w(N);u.includes(R)||(y.splice(h,0,N),C.push(N))}return r==="wait"&&C.length&&(y=C),L(S(y)),K(c),null}const{forceRender:T}=i.useContext(J);return e.jsx(e.Fragment,{children:k.map(y=>{const h=w(y),N=f&&!d?!1:c===k||u.includes(h),R=()=>{if(n.has(h))n.set(h,!0);else return;let M=!0;n.forEach(O=>{O||(M=!1)}),M&&(T?.(),L(p.current),f&&v?.(),l&&l())};return e.jsx(oe,{isPresent:N,initial:!m.current||a?void 0:!1,custom:t,presenceAffectsLayout:o,mode:r,root:b,onExitComplete:N?void 0:R,anchorX:x,children:y},h)})})},_=(s="")=>s.split(" ").map(t=>t[0]).join("").substring(0,2).toUpperCase();function pe(){const{auth:s}=F().props,t=s?.user,a=s?.roles??[],l=!!t,[o,r]=i.useState(!1),[f,x]=i.useState(!1),[b,d]=i.useState(!1),v=["super_admin","admin","resepsionis","dokter","apoteker"],c=a.some(n=>v.includes(n));i.useEffect(()=>{const n=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]);const u=i.useRef(null),m=[{name:"Beranda",href:""},{name:"Cari Klinik",href:"cari-klinik"},{name:"Untuk Klinik",href:"untuk-klinik"},{name:"Tentang Kami",href:"tentang-kami"}];i.useEffect(()=>{function n(g){u.current&&!u.current.contains(g.target)&&x(!1)}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const p=()=>{x(!1),r(!1),H.post("/logout")};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:`sticky top-0 z-50 w-full bg-white transition-all duration-300 ${b?"border-b shadow-sm":""}`,children:e.jsx("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex h-14 items-center justify-between sm:h-16 lg:grid lg:grid-cols-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(j,{href:"/",children:e.jsx("img",{src:W,alt:"logo",className:"h-7 sm:h-8 lg:h-9"})})}),e.jsx("ul",{className:"hidden items-center justify-center gap-4 text-sm font-medium text-gray-700 lg:flex xl:gap-6",children:m.map((n,g)=>e.jsx("li",{className:"transition hover:text-emerald-600",children:e.jsx(j,{href:`/${n.href}`,children:n.name})},g))}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(j,{href:"/kontak-kami",className:"hidden rounded-full border border-emerald-600 px-4 py-2 text-sm font-medium text-emerald-600 transition hover:bg-emerald-50 lg:flex",children:"Daftarkan Klinik"}),e.jsx("div",{className:"relative hidden lg:block",ref:u,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>x(!f),className:"flex items-center gap-2 rounded-lg px-4 py-2 hover:bg-gray-50",children:[e.jsx(z,{className:"h-8 w-8",children:t.avatar?e.jsx("img",{src:`/storage/${t.avatar}`,alt:t.name,className:"h-full w-full rounded-full object-cover",loading:"lazy",onError:n=>n.currentTarget.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&size=128`}):e.jsx($,{className:"bg-emerald-600 text-sm font-medium text-white",children:_(t.name)})}),e.jsxs("div",{className:"hidden text-left xl:block",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-800",children:["Hai, ",t.name]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Lihat profil"})]})]}),e.jsx(de,{children:f&&e.jsxs(Q.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 rounded-lg border bg-white shadow-md",children:[e.jsxs(j,{href:"/profile",className:"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-50",onClick:()=>x(!1),children:[e.jsx(I,{size:16}),"Profil"]}),c&&e.jsxs(j,{href:"/dashboard",className:"flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-50",onClick:()=>x(!1),children:[e.jsx(A,{size:16}),"Dashboard"]}),e.jsxs("button",{onClick:p,className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx(P,{size:16}),"Keluar"]})]})})]}):e.jsxs(j,{href:"/login",className:"flex items-center gap-1 rounded-full bg-emerald-600 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-700",children:["Masuk",e.jsx(ee,{size:16})]})}),e.jsx("button",{onClick:()=>r(!o),className:"rounded-lg p-2 hover:bg-gray-100 lg:hidden",children:o?e.jsx(B,{className:"h-5 w-5"}):e.jsx(ne,{className:"h-5 w-5"})})]})]})})}),o&&e.jsx("div",{className:"fixed inset-0 z-30 bg-black/20 lg:hidden",onClick:()=>r(!1)}),e.jsx("div",{className:`fixed inset-x-0 top-14 z-40 transition-all lg:hidden ${o?"translate-y-0 opacity-100":"pointer-events-none -translate-y-2 opacity-0"}`,children:e.jsxs("div",{className:"rounded-b-2xl bg-white shadow-xl ring-1 ring-black/5",children:[l&&e.jsxs("div",{className:"flex items-center gap-3 border-b px-4 py-4",children:[e.jsx(z,{className:"h-10 w-10",children:t.avatar?e.jsx("img",{src:`/storage/${t.avatar}`,alt:t.name,className:"h-full w-full rounded-full object-cover",onError:n=>n.currentTarget.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&size=128`}):e.jsx($,{className:"bg-emerald-600 text-sm font-medium text-white",children:_(t.name)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.email})]})]}),e.jsx("ul",{className:"space-y-1 px-2 py-3",children:m.map((n,g)=>e.jsx("li",{children:e.jsx(j,{href:`/${n.href}`,className:"flex items-center gap-3 rounded-xl px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100",onClick:()=>r(!1),children:n.name})},g))}),l&&e.jsxs("div",{className:"space-y-1 border-t px-2 py-3",children:[e.jsxs(j,{href:"/profile",className:"flex items-center gap-3 rounded-xl px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100",onClick:()=>r(!1),children:[e.jsx(I,{className:"h-4 w-4 text-gray-400"}),"Profil"]}),c&&e.jsxs(j,{href:"/dashboard",className:"flex items-center gap-3 rounded-xl px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100",onClick:()=>r(!1),children:[e.jsx(A,{className:"h-4 w-4 text-gray-400"}),"Dashboard"]}),e.jsxs("button",{onClick:p,className:"flex w-full items-center gap-3 rounded-xl px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50",children:[e.jsx(P,{className:"h-4 w-4"}),"Keluar"]})]})]})})]})}export{pe as N};
