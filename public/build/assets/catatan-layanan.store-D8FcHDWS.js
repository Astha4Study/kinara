import{c as H}from"./react-QHy7mJCH.js";function P(s,i){let r;try{r=s()}catch{return}return{getItem:o=>{var e;const d=m=>m===null?null:JSON.parse(m,void 0),c=(e=r.getItem(o))!=null?e:null;return c instanceof Promise?c.then(d):d(c)},setItem:(o,e)=>r.setItem(o,JSON.stringify(e,void 0)),removeItem:o=>r.removeItem(o)}}const _=s=>i=>{try{const r=s(i);return r instanceof Promise?r:{then(n){return _(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return _(n)(r)}}}},R=(s,i)=>(r,n,o)=>{let e={storage:P(()=>localStorage),partialize:t=>t,version:0,merge:(t,h)=>({...h,...t}),...i},d=!1;const c=new Set,m=new Set;let u=e.storage;if(!u)return s((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${e.name}', the given storage is currently unavailable.`),r(...t)},n,o);const p=()=>{const t=e.partialize({...n()});return u.setItem(e.name,{state:t,version:e.version})},k=o.setState;o.setState=(t,h)=>(k(t,h),p());const v=s((...t)=>(r(...t),p()),n,o);o.getInitialState=()=>v;let f;const S=()=>{var t,h;if(!u)return;d=!1,c.forEach(a=>{var l;return a((l=n())!=null?l:v)});const g=((h=e.onRehydrateStorage)==null?void 0:h.call(e,(t=n())!=null?t:v))||void 0;return _(u.getItem.bind(u))(e.name).then(a=>{if(a)if(typeof a.version=="number"&&a.version!==e.version){if(e.migrate){const l=e.migrate(a.state,a.version);return l instanceof Promise?l.then(y=>[!0,y]):[!0,l]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,a.state];return[!1,void 0]}).then(a=>{var l;const[y,b]=a;if(f=e.merge(b,(l=n())!=null?l:v),r(f,!0),y)return p()}).then(()=>{g?.(f,void 0),f=n(),d=!0,m.forEach(a=>a(f))}).catch(a=>{g?.(void 0,a)})};return o.persist={setOptions:t=>{e={...e,...t},t.storage&&(u=t.storage)},clearStorage:()=>{u?.removeItem(e.name)},getOptions:()=>e,rehydrate:()=>S(),hasHydrated:()=>d,onHydrate:t=>(c.add(t),()=>{c.delete(t)}),onFinishHydration:t=>(m.add(t),()=>{m.delete(t)})},e.skipHydration||S(),f||v},w=R,I={antrian_id:0,pemeriksaan_fisik_id:null,pasien_id:0,klinik_id:0,keluhan_utama:"",detail_keluhan:"",diagnosa:"",tindakan:"",catatan_lain:"",layanan:[],butuh_resep:!0},F=H()(w(s=>({data:{...I},processing:!1,errors:{},setData:(i,r)=>s(n=>({data:{...n.data,[i]:r}})),setProcessing:i=>s({processing:i}),setErrors:i=>s({errors:i}),reset:()=>s({data:{...I},processing:!1,errors:{}})}),{name:"catatan-layanan",partialize:s=>({data:s.data})}));export{F as u};
