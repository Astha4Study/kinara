import{r as o,j as e,b as d,u as m,H as g}from"./app-CgQ5_Exw.js";import{A as u,b as h,c as f,d as j,g as y,e as k,f as b,h as N}from"./alert-dialog-Ib_-xiso.js";import{D as w,a as v,b as D,c,A}from"./app-layout-t2dowiqj.js";import{E as C}from"./ellipsis-CXl1TxIw.js";import{C as P}from"./circle-check-icf0PL4F.js";import{C as T}from"./circle-x-GbGDlYjV.js";import"./app-BKSfwL7n.js";import"./index-CwTnP0Ax.js";import"./index-Bg-JEsM4.js";import"./utils-B4smH_VX.js";import"./index-D6pdehZ5.js";import"./index-CJy58a3f.js";import"./avatar-CqAQLXEM.js";import"./button-BJRDkhjt.js";import"./index-Dt6uqdf4.js";import"./index-DYp1igiw.js";import"./index-4Ns3tNZl.js";import"./settings-tEfU3Xeu.js";import"./users-D_KveccA.js";function _({id:s,name:r,onUpdate:l}){const[i,n]=o.useState(!1),[t,a]=o.useState(null),p=()=>{t&&(t==="verifikasi"?d.visit(`/resepsionis/pasien-online/${s}/edit`):(d.put(`/resepsionis/pasien-online/${s}`,{status:"ditolak"}),l()),n(!1))};return e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx(v,{asChild:!0,children:e.jsx("button",{className:"inline-flex h-8 w-8 items-center justify-center rounded-md text-gray-600 hover:bg-gray-100 focus:ring-2 focus:ring-emerald-500 focus:outline-none",children:e.jsx(C,{className:"h-4 w-4"})})}),e.jsxs(D,{align:"end",className:"w-44 border border-gray-200 bg-white shadow-lg",children:[e.jsxs(c,{onClick:()=>{a("verifikasi"),n(!0)},className:"flex cursor-pointer items-center gap-3 text-emerald-600 hover:bg-emerald-50",children:[e.jsx(P,{className:"h-4 w-4 text-emerald-500"})," ","Verifikasi"]}),e.jsxs(c,{onClick:()=>{a("tolak"),n(!0)},className:"flex cursor-pointer items-center gap-3 text-red-600 hover:bg-red-50",children:[e.jsx(T,{className:"h-4 w-4 text-red-500"})," Tolak"]})]})]}),e.jsx(u,{open:i,onOpenChange:n,children:e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsxs(j,{children:["Konfirmasi"," ",t==="verifikasi"?"Verifikasi":"Tolak"]}),e.jsxs(y,{children:["Apakah kamu yakin ingin"," ",t==="verifikasi"?"memverifikasi":"menolak"," ","pasien online ",e.jsx("b",{children:r}),"?"," ",t==="verifikasi"?"Tindakan ini akan membuka form verifikasi pasien.":"Tindakan ini akan mengubah status pendaftaran menjadi ditolak."]})]}),e.jsxs(k,{children:[e.jsx(b,{children:"Batal"}),e.jsxs(N,{onClick:p,className:t==="verifikasi"?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-red-600 text-white hover:bg-red-700",children:["Ya,"," ",t==="verifikasi"?"Verifikasi":"Tolak"]})]})]})})]})}const x=["Nomor Pasien","Nama Pasien","NIK","Gender","Periode Daftar","Umur","Status"],M=[{title:"Pasien Online",href:"/resepsionis/pasien-online"}];function O(s){if(!s)return"-";const r=new Date(s),l=new Date;let i=l.getFullYear()-r.getFullYear();const n=l.getMonth()-r.getMonth();return(n<0||n===0&&l.getDate()<r.getDate())&&i--,`${i} tahun`}function L({status:s}){switch(s){case"pending":return e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-yellow-50 px-3 py-1 text-xs font-medium text-yellow-700",children:"Menunggu"});case"terverifikasi":return e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-700",children:"Terverifikasi"});case"ditolak":return e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-50 px-3 py-1 text-xs font-medium text-red-700",children:"Ditolak"});default:return e.jsx("span",{className:"rounded-full bg-gray-100 px-3 py-1 text-xs text-gray-600",children:s})}}function Z(){const{pasienOnline:s}=m().props,[r,l]=o.useState(""),i=Array.isArray(s)?s:s.data??[],n=i.filter(a=>a.status==="pending").length,t=i.filter(a=>a.status==="pending"&&(a.nama_lengkap.toLowerCase().includes(r.toLowerCase())||a.nik.includes(r)));return e.jsxs(A,{breadcrumbs:M,children:[e.jsx(g,{title:"Pasien Online"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Pasien Online"}),e.jsx("p",{className:"mt-1 mb-4 text-sm text-gray-500",children:"Daftar pasien online yang menunggu persetujuan"})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[x.map(a=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:a},a)),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:t.length>0?t.map(a=>e.jsxs("tr",{className:"transition hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:a.nomor_pendaftaran}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-700",children:a.nama_lengkap}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:a.nik}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:a.jenis_kelamin==="L"?"Laki-laki":"Perempuan"}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:a.periode_daftar?new Date(a.periode_daftar).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:O(a.tanggal_lahir)}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.jsx(L,{status:a.status})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(_,{id:a.id,name:a.nama_lengkap,onUpdate:()=>{d.reload()}})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:x.length+1,className:"px-6 py-10 text-center text-sm text-gray-500",children:"Tidak ada pasien online pending."})})})]})})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Menampilkan ",t.length," dari ",n," ","pasien online"]})]})]})}export{Z as default};
