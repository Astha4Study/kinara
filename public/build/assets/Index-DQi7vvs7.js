import{r as m,j as e,L as u,b as x,t as h,u as o,H as w}from"./app-CgQ5_Exw.js";import{A as v,b as D,c as A,d as C,g as L,e as S,f as E,h as T}from"./alert-dialog-Ib_-xiso.js";import{D as H,a as I,b as _,c,A as $}from"./app-layout-t2dowiqj.js";import{E as M}from"./ellipsis-CXl1TxIw.js";import{E as P}from"./eye-TnGqv_Wk.js";import{S as B}from"./square-pen-B93hyhYM.js";import{T as K}from"./trash-DI2S3DDQ.js";import{B as F}from"./badge-DMedZmZe.js";import{d as O}from"./index-CnAOvh5b.js";import{S as Q}from"./search-CDbg9dwJ.js";import{P as R}from"./plus-DcjA9-uR.js";import{X as Y}from"./avatar-CqAQLXEM.js";import"./app-BKSfwL7n.js";import"./index-CwTnP0Ax.js";import"./index-Bg-JEsM4.js";import"./utils-B4smH_VX.js";import"./index-D6pdehZ5.js";import"./index-CJy58a3f.js";import"./button-BJRDkhjt.js";import"./index-Dt6uqdf4.js";import"./index-DYp1igiw.js";import"./index-4Ns3tNZl.js";import"./settings-tEfU3Xeu.js";import"./users-D_KveccA.js";function q({id:n,namaLayanan:s}){const[p,l]=m.useState(!1),t=()=>{x.delete(`/admin/layanan/${n}`,{onSuccess:()=>{h.success("Layanan berhasil dihapus",{description:`Layanan ${s} telah dihapus dari sistem.`})},onError:()=>{h.error("Gagal menghapus layanan",{description:"Terjadi kesalahan saat menghapus layanan."})}})};return e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsx(I,{asChild:!0,children:e.jsx("button",{className:"flex h-8 w-8 items-center justify-center rounded-md text-gray-600 hover:bg-gray-100 focus:ring-2 focus:ring-emerald-500 focus:outline-none",children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs(_,{align:"end",className:"w-44 border border-gray-200 bg-white shadow-lg",children:[e.jsx(c,{asChild:!0,children:e.jsxs(u,{href:`/admin/layanan/${n}`,className:"flex items-center gap-3 text-blue-600 hover:bg-blue-50",children:[e.jsx(P,{className:"h-4 w-4 text-blue-500"}),"Lihat Detail"]})}),e.jsx(c,{asChild:!0,children:e.jsxs(u,{href:`/admin/layanan/${n}/edit`,className:"flex items-center gap-3 text-emerald-600 hover:bg-emerald-50",children:[e.jsx(B,{className:"h-4 w-4 text-emerald-500"}),"Edit"]})}),e.jsxs(c,{onClick:()=>l(!0),className:"flex cursor-pointer items-center gap-3 text-red-600 hover:bg-red-50",children:[e.jsx(K,{className:"h-4 w-4 text-red-500"}),"Hapus"]})]})]}),e.jsx(v,{open:p,onOpenChange:l,children:e.jsxs(D,{children:[e.jsxs(A,{children:[e.jsx(C,{children:"Konfirmasi Hapus"}),e.jsxs(L,{children:["Apakah kamu yakin ingin menghapus layanan"," ",e.jsx("b",{children:s}),"? Tindakan ini tidak bisa dibatalkan."]})]}),e.jsxs(S,{children:[e.jsx(E,{children:"Batal"}),e.jsx(T,{onClick:t,className:"bg-red-600 text-white hover:bg-red-700",children:"Ya, Hapus"})]})]})})]})}const G=["Nama Layanan","Keterangan","Harga","Status","Terakhir Diperbarui","Aksi"],X=[{title:"Daftar Layanan",href:""}];function fe(){const{props:n}=o(),{layanan:s,flash:p}=o().props,{klinik:l}=o().props,[t,i]=m.useState([]),[g,y]=m.useState(""),f=a=>{i(r=>r.includes(a)?r.filter(k=>k!==a):[...r,a])},j=()=>{i(t.length===s.length?[]:s.map(a=>a.id))},b=()=>{t.length&&confirm(`Yakin ingin menghapus ${t.length} layanan?`)&&(t.forEach(a=>O.Inertia.delete(`/admin/layanan/${a}`)),i([]))},N=()=>{l?x.visit("/admin/layanan/create"):x.visit("/admin/klinik",{method:"get",onSuccess:()=>{h.error("Anda harus membuat klinik terlebih dahulu sebelum menambah layanan.")}})},d=s.filter(a=>a.nama_layanan.toLowerCase().includes(g.toLowerCase()));return e.jsxs($,{breadcrumbs:X,children:[e.jsx(w,{title:"Daftar Layanan"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Daftar Layanan"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Kelola layanan yang tersedia di klinik"})]}),e.jsxs("div",{className:"my-4 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("div",{className:"relative flex gap-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari layanan berdasarkan nama...",value:g,onChange:a=>y(a.target.value),className:"min-w-[400px] rounded-lg border border-gray-200 bg-white py-2.5 pr-4 pl-10 text-sm focus:border-emerald-400 focus:ring-emerald-400"})]})}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2.5 text-sm font-medium text-white hover:bg-emerald-700",children:[e.jsx(R,{className:"h-4 w-4"}),"Tambah Layanan"]})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"px-6 py-3 text-center",children:e.jsx("input",{type:"checkbox",checked:t.length===s.length&&s.length>0,onChange:j,className:"mx-auto h-4 w-4 rounded border-gray-300 text-emerald-600"})}),G.map((a,r)=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:a},r))]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:d.length?d.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-3 text-center",children:e.jsx("input",{type:"checkbox",checked:t.includes(a.id),onChange:()=>f(a.id),className:"mx-auto h-4 w-4 rounded border-gray-300 text-emerald-600"})}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:a.nama_layanan}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.jsx("div",{className:"line-clamp-2 max-w-md whitespace-normal",children:a.detail_layanan.map(r=>r.keterangan).join(", ")})}),e.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Rp"," ",a.harga.toLocaleString("id-ID")]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(F,{className:a.aktif?"inline-flex rounded-full bg-emerald-100 px-2 py-1 text-xs font-medium text-emerald-700":"inline-flex rounded-full bg-red-100 px-2 py-1 text-xs font-medium text-red-700",children:a.aktif?"Aktif":"Tidak Aktif"})}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:new Date(a.updated_at).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"})}),e.jsx("td",{className:"space-x-3 px-6 py-4",children:e.jsx(q,{id:a.id,namaLayanan:a.nama_layanan})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-sm text-gray-500",children:"Tidak ada layanan"})})})]})})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Menampilkan ",d.length," dari ",s.length," ","layanan"]}),t.length>0&&e.jsxs("div",{className:"fixed bottom-8 left-1/2 flex -translate-x-1/2 items-center gap-4 rounded-lg border bg-white px-6 py-3 shadow-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[t.length," layanan dipilih"]}),e.jsx("button",{onClick:b,className:"rounded-lg border border-red-200 px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50",children:"Hapus"}),e.jsx("button",{onClick:()=>i([]),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Y,{className:"h-5 w-5"})})]})]})]})}export{fe as default};
