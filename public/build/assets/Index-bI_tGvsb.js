import{r as h,j as e,L as g,a as p,u as f,H as v,t as m}from"./app-Ocq4icyJ.js";import{A as C,b as D,c as A,d as S,e as E,f as L,g as T,h as U}from"./alert-dialog-BEkTNufo.js";import{D as H,a as $,b as I,c as x,A as M}from"./app-layout-CvpzEEPm.js";import{E as P}from"./ellipsis-B2vBefOW.js";import{E as K}from"./eye-CVhHPzvz.js";import{S as F}from"./square-pen-D668Od0k.js";import{T as O}from"./trash-BEvhXDX5.js";import{d as Q}from"./index-T-0SNEsN.js";import{S as R}from"./search-Du9gvAn0.js";import{P as Y}from"./plus-D16kLAdx.js";import{X as _}from"./avatar-p7XMLe9B.js";import"./app-C5lo-_3G.js";import"./index-BMVo49-9.js";import"./index-DxN2IpeV.js";import"./utils-Ds7cxrxR.js";import"./index-CY_07Mx7.js";import"./index-D_nX7TNC.js";import"./button-DsBpidke.js";import"./index-Dcn7FtQn.js";import"./index-6sq2BDXy.js";import"./index-4Ns3tNZl.js";import"./settings-CxkdKHPl.js";import"./users-udHOKson.js";function q({id:r,name:a}){const[u,l]=h.useState(!1),n=()=>{p.delete(`/admin/users/${r}`)};return e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsx($,{asChild:!0,children:e.jsx("button",{className:"inline-flex h-8 w-8 items-center justify-center rounded-md text-gray-600 hover:bg-gray-100 focus:ring-2 focus:ring-emerald-500 focus:outline-none",children:e.jsx(P,{className:"h-4 w-4"})})}),e.jsxs(I,{align:"end",className:"w-44 border border-gray-200 bg-white shadow-lg",children:[e.jsx(x,{asChild:!0,children:e.jsxs(g,{href:`/admin/users/${r}`,className:"flex items-center gap-3 text-blue-600 hover:bg-blue-50",children:[e.jsx(K,{className:"h-4 w-4 text-blue-500"})," Lihat Detail"]})}),e.jsx(x,{asChild:!0,children:e.jsxs(g,{href:`/admin/users/${r}/edit`,className:"flex items-center gap-3 text-emerald-600 hover:bg-emerald-50",children:[e.jsx(F,{className:"h-4 w-4 text-emerald-500"})," Edit"]})}),e.jsxs(x,{onClick:()=>l(!0),className:"flex cursor-pointer items-center gap-3 text-red-600 hover:bg-red-50",children:[e.jsx(O,{className:"h-4 w-4 text-red-500"})," Hapus"]})]})]}),e.jsx(C,{open:u,onOpenChange:l,children:e.jsxs(D,{children:[e.jsxs(A,{children:[e.jsx(S,{children:"Konfirmasi Hapus"}),e.jsxs(E,{children:["Apakah kamu yakin ingin menghapus user ",e.jsx("b",{children:a}),"? Tindakan ini tidak bisa dibatalkan."]})]}),e.jsxs(L,{children:[e.jsx(T,{children:"Batal"}),e.jsx(U,{onClick:n,className:"bg-red-600 text-white hover:bg-red-700",children:"Ya, Hapus"})]})]})})]})}const z=[{title:"Daftar User",href:""}];function ge(){const{props:r}=f(),{users:a,flash:u,klinik:l}=f().props,n=!!l,[t,i]=h.useState([]),[d,j]=h.useState(""),b=s=>{i(c=>c.includes(s)?c.filter(k=>k!==s):[...c,s])},y=()=>{i(t.length===a.length?[]:a.map(s=>s.id))},N=()=>{t.length&&confirm(`Yakin ingin menghapus ${t.length} user?`)&&(t.forEach(s=>Q.Inertia.delete(`/admin/tambah-user/${s}`,{onSuccess:()=>{m.success("User berhasil dihapus",{description:`Data ${t.length} user telah dihapus dari sistem.`})},onError:()=>{m.error("Gagal menghapus user",{description:"Terjadi kesalahan saat menghapus data user."})}})),i([]))},w=()=>{n?p.visit("/admin/tambah-user/create"):p.visit("/admin/klinik",{onSuccess:()=>{m.error("Anda harus membuat fasilitas klinik terlebih dahulu sebelum menambahkan user.")}})},o=a.filter(s=>s.name.toLowerCase().includes(d.toLowerCase())||s.email.toLowerCase().includes(d.toLowerCase()));return e.jsxs(M,{breadcrumbs:z,children:[e.jsx(v,{title:"Daftar User"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Daftar User"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Kelola data user yang terdaftar"})]}),e.jsxs("div",{className:"my-4 flex flex-wrap items-center justify-between gap-3",children:[e.jsx("div",{className:"relative flex gap-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari user berdasarkan nama atau email...",value:d,onChange:s=>j(s.target.value),className:"min-w-[400px] rounded-lg border border-gray-200 bg-white py-2.5 pr-4 pl-10 text-sm focus:border-emerald-400 focus:ring-emerald-400"})]})}),e.jsxs("button",{onClick:w,className:"flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2.5 text-sm font-medium text-white transition hover:bg-emerald-700",children:[e.jsx(Y,{className:"h-4 w-4"}),"Tambah User"]})]}),e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"px-6 py-3 text-center",children:e.jsx("input",{type:"checkbox",checked:t.length===a.length&&a.length>0,onChange:y,className:"mx-auto h-4 w-4 rounded border-gray-300 text-emerald-600"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:o.length?o.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-3 text-center",children:e.jsx("input",{type:"checkbox",checked:t.includes(s.id),onChange:()=>b(s.id),className:"mx-auto h-4 w-4 rounded border-gray-300 text-emerald-600"})}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:s.email}),e.jsx("td",{className:"px-6 py-4 text-gray-700 capitalize",children:s.roles.join(", ")}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(q,{id:s.id,name:s.name})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-sm text-gray-500",children:"Tidak ada data user"})})})]})})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Menampilkan ",o.length," dari ",a.length," user"]}),t.length>0&&e.jsxs("div",{className:"fixed bottom-8 left-1/2 flex -translate-x-1/2 items-center gap-4 rounded-lg border bg-white px-6 py-3 shadow-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[t.length," user dipilih"]}),e.jsx("button",{onClick:N,className:"rounded-lg border border-red-200 px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50",children:"Hapus"}),e.jsx("button",{onClick:()=>i([]),className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{className:"h-5 w-5"})})]})]})]})}export{ge as default};
