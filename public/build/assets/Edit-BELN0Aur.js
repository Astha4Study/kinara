import{j as e,L as f,a as j,r as c,H as _,b as y,t as u}from"./app-CgQ5_Exw.js";import{A as N,b as v,c as k,d as A,g as C,e as D,f as E,h as P}from"./alert-dialog-Ib_-xiso.js";import{A as S}from"./app-layout-t2dowiqj.js";import"./app-BKSfwL7n.js";import"./index-CwTnP0Ax.js";import"./index-Bg-JEsM4.js";import"./utils-B4smH_VX.js";import"./index-D6pdehZ5.js";import"./index-CJy58a3f.js";import"./avatar-CqAQLXEM.js";import"./button-BJRDkhjt.js";import"./index-Dt6uqdf4.js";import"./index-DYp1igiw.js";import"./index-4Ns3tNZl.js";import"./settings-tEfU3Xeu.js";import"./users-D_KveccA.js";const L=({data:r,setData:n,handleSubmit:a,processing:o,availableRoles:i,errors:t,isDirty:m})=>{const d=s=>{s.preventDefault(),a(s)};return e.jsxs("form",{onSubmit:d,autoComplete:"off",className:"space-y-6 rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Nama Lengkap ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.name,onChange:s=>n("name",s.target.value),className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",placeholder:"Masukkan nama lengkap"}),t.name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:t.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:r.email,onChange:s=>n("email",s.target.value),className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",placeholder:"example@mail.com"}),t.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:t.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:r.role,disabled:!0,onChange:s=>n("role",s.target.value),className:"w-full cursor-not-allowed rounded-lg border border-gray-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20",children:i.map(s=>e.jsx("option",{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),t.role&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:t.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Password Lama"}),e.jsx("input",{type:"password",value:r.current_password,onChange:s=>n("current_password",s.target.value),placeholder:"Masukkan password lama",className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20"}),t.current_password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:t.current_password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Password Baru"}),e.jsx("input",{type:"password",value:r.new_password,onChange:s=>n("new_password",s.target.value),placeholder:"Masukkan password baru",className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20"}),t.new_password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:t.new_password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Konfirmasi Password Baru"}),e.jsx("input",{type:"password",value:r.new_password_confirmation,onChange:s=>n("new_password_confirmation",s.target.value),placeholder:"Ulangi password baru",className:"w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20"}),t.new_password_confirmation&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:t.new_password_confirmation})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(f,{href:"/super-admin/kelola-admin",className:"rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Batal"}),e.jsx("button",{type:"submit",disabled:o||!m,className:"rounded-lg bg-emerald-600 px-4 py-2.5 text-sm font-medium text-white hover:bg-emerald-700 disabled:opacity-50",children:o?"Menyimpan...":"Simpan"})]})]})},B=[{title:"Daftar Admin",href:"/super-admin/kelola-admin"},{title:"Edit Admin",href:""}];function X({admin:r,availableRoles:n}){const{data:a,setData:o,processing:i,errors:t}=j({name:r.name||"",email:r.email||"",role:r.role||"",current_password:"",new_password:"",new_password_confirmation:""}),[m,d]=c.useState(!1),[s,x]=c.useState(!1),p=a.current_password.length>0&&a.new_password.length>0&&a.new_password_confirmation.length>0&&a.new_password===a.new_password_confirmation;c.useEffect(()=>{const l={name:r.name||"",email:r.email||"",role:r.role||""},w=a.name!==l.name||a.email!==l.email||a.role!==l.role,b=a.current_password.length>0||a.new_password.length>0||a.new_password_confirmation.length>0;x(w||b&&p)},[a,r]);const g=()=>{const l=new FormData;l.append("name",a.name),l.append("email",a.email),l.append("role",a.role),p&&(l.append("current_password",a.current_password),l.append("new_password",a.new_password),l.append("new_password_confirmation",a.new_password_confirmation)),y.post(`/super-admin/kelola-admin/${r.id}?_method=PUT`,l,{onSuccess:()=>{u.success("Admin berhasil diperbarui",{description:"Data admin telah berhasil disimpan ke sistem."})},onError:()=>{u.error("Gagal memperbarui admin",{description:"Periksa kembali data yang diinput."})}})},h=l=>{l.preventDefault(),d(!0)};return e.jsxs(S,{breadcrumbs:B,children:[e.jsx(_,{title:"Edit Admin"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"mb-1 text-2xl font-semibold text-gray-900",children:"Edit Data Admin"}),e.jsx("p",{className:"mb-6 text-sm text-gray-500",children:"Perbarui informasi admin di bawah ini."}),e.jsx("div",{className:"overflow-hidden",children:e.jsx(L,{data:a,setData:o,handleSubmit:h,processing:i,availableRoles:n,errors:t,isDirty:s})})]}),e.jsx(N,{open:m,onOpenChange:d,children:e.jsxs(v,{children:[e.jsxs(k,{children:[e.jsx(A,{children:"Konfirmasi Perubahan"}),e.jsx(C,{children:"Pastikan data admin sudah benar sebelum disimpan."})]}),e.jsxs(D,{children:[e.jsx(E,{children:"Batal"}),e.jsx(P,{onClick:g,className:"bg-emerald-600 hover:bg-emerald-700",children:"Simpan"})]})]})})]})}export{X as default};
